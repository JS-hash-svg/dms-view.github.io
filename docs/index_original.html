<!DOCTYPE html>
<html>
<html lang="en-US">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Exploring HA Deep Mutational Scan Data</title>
  <link rel="stylesheet" href="css/main.css">
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://d3js.org/d3-color.v1.min.js"></script>
  <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.js"></script>
  <script src="https://d3js.org/d3-array.v2.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.js"></script>
  <link rel="stylesheet" href="https://www.ncbi.nlm.nih.gov/Structure/icn3d/lib/jquery-ui.min.css" />
  <link rel="stylesheet" href="https://www.ncbi.nlm.nih.gov/Structure/icn3d/icn3d_full_ui.css" />
  <script src="https://www.ncbi.nlm.nih.gov/Structure/icn3d/lib/jquery.min.js"></script>
  <script src="https://www.ncbi.nlm.nih.gov/Structure/icn3d/lib/jquery-ui.min.js"></script>
  <script src="https://www.ncbi.nlm.nih.gov/Structure/icn3d/lib/three.min.js"></script>
  <script src="https://www.ncbi.nlm.nih.gov/Structure/icn3d/icn3d_full_ui.min.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
  <script src="_javascript/delete_button.js"></script>
  <style>
  .focus circle.non_brushed {
    fill: #999999;
  }
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  .focus circle.has_data {
    fill: #000000;
  }
    <title>Exploring HA Deep Mutational Scan Data</title>

  .focus circle.hovered {
    r: 8;
    fill: blue;
  }
  .focus circle.selected {
    r: 8;
    fill: red;
  }
  </style>
</head>

<body>
  <section class="hero is-small is-primary">
    <div class="hero-body">
      <div class="container">
        <div class="columns">
          <div class="column is-8-desktop is-offset-1-desktop">
            <h1 class="title is-1 is-spaced">
              Seasonal influenza evolution in the lab and nature
            </h1>
            <p class="subtitle is-4">The line plot below reveals sites in seasonal influenza A/H3N2's hemagglutinin where mutations have allowed individual viruses to escape human adaptive immunity in laboratory conditions.</p>
            <p class="subtitle is-4">Click on a site shown on the line plot to see the position of that site in the three-dimensional protein structure of hemagglutinin and the frequencies of mutations at that site in natural influenza populations.</p>
            <p class="subtitle is-4">Sites shown in <strong style="color: #000000">black</strong> have frequency data. Sites shown in <strong style="color: #999999">grey</strong> do not have any genetic variation in natural populations and therefore do not have any mutation frequency data.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="section">
    <div class="container level-item">
      <div class="columns">
        <div class="column is-12-tablet is-moble">
          <div class="column">
            <div class="column">
              <div class="tile is-parent ">
                <div class="tile is-parent is-horizontal">
                  <div class="tile is-parent box is-vertical">
                    <div class="tile is-child has-text-centered">
                      <div id="myBtn" class="button">Open Modal</div>
                      <div class="modal" id="myModal">
                        <div class="modal-background"></div>
                        <div class="modal-content">
                          <section></section>
                          <div class="notification is-danger">
                            <button class="delete"></button>
                            <p class="is-size-4">This is an example of a pop-up warning we could create.</p>
                          </div>
                        </div>
                      </div>
                      <div id="line_plot"></div>
                    </div>
                    <!-- we need ot debug this ... I have to switch to a different d3 here -->
                    <div class="tile is-child has-text-centered is-moble">
                      <div id="frequencies"></div>
                    </div>
  <div class="container">
    <div class="row mt-3">
      <div class="col-12">
        <h1>Seasonal influenza evolution in the lab and nature</h1>

                  </div>
                  <div class="tile is-parent is-vertical">
                    <!--protein structure visualization-->
                    <div class="tile is-child has-text-centered">
                      <div class="card">
                        <header class="card-header">
                          <div class="dropdown is-hoverable">
                            <div class="dropdown-trigger">
                              <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
                            <span class="icon is-small">
                              <i class="fas fa-angle-down" aria-hidden="true"></i>
                            </span>
                          </button>
                            </div>
                            <div class="dropdown-menu" id="dropdown-menu" role="menu">
                              <div class="dropdown-content">
                                <a id="save_image" class="dropdown-item">
                              Save Image
                            </a>
                                <a id ="remove_selections" class="dropdown-item">
                              Remove All Selections
                            </a>
                                <a id="send_state" class="dropdown-item">
                              Share a Link to Your Visualization
                            </a>
                                <a id="upload_pdb" class="dropdown-item">
                              Load a custom PDB file
                            </a>
                              </div>
                            </div>
                        </header>
        <p>The line plot below reveals sites in seasonal influenza A/H3N2's hemagglutinin where mutations have allowed individual viruses to escape human adaptive immunity in laboratory conditions.</p>

                        <div class="card-content">
                          <div class="tile is-parent" align="center">
                            <div class="tile is-child" align="center">
                              <div id="icn3dwrap" align="center">
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--color selection widget.. this will get removed eventually-->
                      <div class = "is-parent box">
                        <div class = "tile is-child has-text-centered" >
                      <input type="color" id="myColor" value="#ff0080">
                      <div id="colorKeydiv"></div>
                      <script src="_javascript/color-legend.js"></script>
                      <div>
                    </div>
        <p>Click on a site shown on the line plot to see the position of that site in the three-dimensional protein structure of hemagglutinin and the frequencies of mutations at that site in natural influenza populations.</p>

                    </div>
                  </div>


                </div>
        <p>Sites shown in <strong style="color: #000000">black</strong> have frequency data. Sites shown in <strong style="color: #999999">grey</strong> do not have any genetic variation in natural populations and therefore do not have any mutation frequency data.</p>
      </div>
    </div>

              </div>
            </div>
          </div>
    <div class="row mb-5 border-top border-bottom pt-3 pb-3">
      <div class="col-8">
        <div id="line_plot" class="row"></div>
        <div id="frequencies" class="row"></div>
      </div>
      <div class="col-4">
        <div class="list-group list-group-horizontal-sm mb-1">
          <button type="button" id="save_image" class="list-group-item list-group-item-action flex-fill">Save</button>
          <button type="button" id ="remove_selections" class="list-group-item list-group-item-action flex-fill">Clear</button>
          <button type="button" id="send_state" class="list-group-item list-group-item-action flex-fill">Share</button>
          <button type="button" id="upload_pdb" class="list-group-item list-group-item-action flex-fill">Load PDB</button>
        </div>
        <div id="icn3dwrap" class="row"></div>
        <div id="colorKeydiv" class="row"></div>
      </div>
    </div>
    </div>
  </section>

  <footer class="footer has-text-centered">
    <div class="container">
      <div class="columns">
        <div class="column is-8-desktop is-offset-2-desktop">
          <p>
            <strong class="has-text-weight-semibold">
              <a href="https://www.npmjs.com/package/bulma-start">bulma-start@0.0.3</a>
            </strong>
          </p>
          <p>
            <small>
              Source code licensed <a href="http://opensource.org/licenses/mit-license.php">MIT</a>
            </small>
          </p>
          <p style="margin-top: 1rem;">
            <a href="http://bulma.io">
              <img src="made-with-bulma.png" alt="Made with Bulma" width="128" height="24">
            </a>
          </p>
        </div>
    <div class="row">
      <div class="col-12">
        <p>Other information here.</p>
        <p>Still more information.</p>
      </div>
    </div>
  </footer>
  <script type="text/javascript" src="lib/main.js"></script>
  <script src="_javascript/modal_activation.js"></script>
  </div>

  <script src="_javascript/color-legend.js"></script>
  <script src="_javascript/line_plot_zoom.js" type="text/javascript"></script>
  <script src="_javascript/frequencies.js" type="text/javascript"></script>
  <script src="_javascript/prot_struct.js"></script>
</body>
</html>
